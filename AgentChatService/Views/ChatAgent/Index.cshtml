@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@model AgentChatService.Models.MessageVM
<script type="text/javascript">

    setInterval(function () {
        $.ajax({
            type: "GET",
            contentType: "application/json; charset=utf-8",
            url: "@Url.Action("Receive")",
            dataType: "json",
            success: function (response) {
                if(response == null)
                {
                    $("#txtInfo").html("<div class='alert alert-warning' role = 'alert' > <b>No Data found in the Queue.</b></div>");
                }
                else 
                {
                    $("#txtInfo").hide();
                var sender = response.split('^')[0];
                var responseMsg = response.split('^')[1];
                var data = $("#txtMessage").html();
                $("#txtMessage").html(data + "<div class='alert alert-success' role = 'alert' > <b>" + sender + ":</b>" + responseMsg + "</div>");
                }
            
            },
            error: function (response) {
            }
        });
    }, 3000);
</script>
<div class="row">
    <div class="col-md-12">
        <div class="alert alert-light" style="background: aliceblue;"> Chat Agent Dashboard</div>
    </div>

</div>
<div class="row">
    <div class="col-md-4">

        <div class="form-group" style="width:400px;margin-bottom: 0px;">
            <div class="btn btn btn-primary" style="width:100%; height:100%;margin-bottom: 0px">
                <div value="Message" class="alert alert-info align-items-lg-start" style="margin: 0;"> Message Box</div>
            </div>
        </div>
        <div class="form-group">
            <div class="btn btn btn-secondary" style="overflow-y:scroll;width:400px;height:300px !important; text-align: left;">
                <div id="txtMessage">
                </div>
            </div>
        </div>
        <div id="txtInfo" style="width: 114%;">
        </div>
    </div>

</div>
